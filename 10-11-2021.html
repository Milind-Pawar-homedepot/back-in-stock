<style id="tnt_personalized_recos" type="text/css">
    #product-section-irg .owl-stage {
      display: flex;
    }
  
    .tnt_owl-item .bttn-outline--primary {
      width: 100% !important;
    }
  
    #required_items .carousel__prev.disabled {
      display: none;
    }
  
    #required_items .carousel__next.disabled {
      display: none;
    }
  
    @media only screen and (max-width: 800px) {
      .tnt_owl-item .certona__productbttnwrapper {
        display: none;
      }
    }
  
    .tnt__bttn__content {
      font-weight: bold;
      font-family: helvetica-neue-bold, Helvetica Neue, Helvetica, Arial,
        sans-serif;
    }
  </style>
<script type="text/javascript">
  try {
      
   
      const readCookie = function (e) {
        e = encodeURIComponent(e)
        let t = (';' + document.cookie).split(' ').join(';'),
          n = t.indexOf(';' + e + '='),
          i = n < 0 ? n : t.indexOf(';', n + 1)
        return n < 0
          ? ''
          : decodeURIComponent(
            t.substring(n + 2 + e.length, i < 0 ? t.length : i)
          )
      }
      const getPriceBreakdown = (price) => {
        if (typeof price === 'number') {
          let dollar = price | 0
          let currency = !dollar ? 'Â¢' : '$'
          let cent = (price % 1).toFixed(2).match(/\d{2}$/g)[0]
          return { currency, dollar, cent }
        }
        return null
      }
      const readAndDecodeBase64Cookie = function (cookieName, separator = '.') {
        try {
          let encodedCookieValue = readCookie(cookieName)
          let encodedSubstring = encodedCookieValue.split(separator)[0]
          let regexPattern = /"/g
          let cleanedEncodedSubstring = encodedSubstring.replace(
            regexPattern,
            ''
          )
          let decodedCookieValue = atob(cleanedEncodedSubstring)
          let cookieObject =
            typeof decodedCookieValue === 'string' && decodedCookieValue
              ? JSON.parse(decodedCookieValue)
              : {}
          return cookieObject
        } catch (error) {
          return {}
        }
      }
      const getUserStatus = function () {
        let b2b = readCookie('THD_CUSTOMER')
        let b2c = readCookie('THD_USER')
        let userStatus = ''

        if (b2c != '') {
          let temp = readAndDecodeBase64Cookie('THD_USER', '.')
          if (temp.svocCustomerAccountId != '') userStatus = 'b2cAuth'
        }
        if (b2b != '') {
          let temp = readAndDecodeBase64Cookie('THD_CUSTOMER', '.')
          if (temp.c == 'B2X' && temp.t != '') userStatus = 'b2xAuth'
          if (temp.c == 'B2B' && temp.t != '') userStatus = 'b2bAuth'
        }
        if (b2b == '' && b2c == '') {
          userStatus = 'guest'
        }
        return userStatus
      }
      const getStoreID = function () {
            let storeID = "";
            let decodedValue = JSON.parse(decodeURIComponent(readCookie("THD_LOCALIZER")));
            if (decodedValue) {
                let locStore = decodedValue.THD_LOCSTORE;
                if (locStore.length > 0) {
                    let locStoreDetails = locStore.split("+");
                    if (locStoreDetails.length > 1) {
                        storeID = locStoreDetails[0] || '';
                        if (storeID != '') {
                            if (!isNaN(parseInt(locStoreDetails[0]))) {
                                storeID = locStoreDetails[0];
                            }
                        }
                    }
                }
            }
            if (!storeID && digitalData && digitalData.user && digitalData.user.localization) {
                storeID = digitalData.user.localization.storeNumber;
            }
            if (!storeID && _dD && _dD.user && _dD.user.localization) {
                storeID = _dD.user.localization.storeNumber;
            }
            //storeID = storeID ? parseInt(storeID, 10) : "";
            if (!storeID) {
                storeID = ""
            };
            return storeID;
        }
      const getCookie = (cname) => {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        };
      const extractUserInfo = function () {
            return atob(JSON.parse((getCookie("THD_USER"))));
        };
      const getSVOC_ID = () => {
            const info = JSON.parse(extractUserInfo());
            if (info) {
                svoc_id = info['svocCustomerAccountId'];
            }
    
            return svoc_id;
        }
      
      const createSingleCard=(data)=> {
            console.log(data)
    
            console.log(data[0].productId)
    
            let imageURL = data[0].imageURL;
            if (imageURL.includes('<SIZE>')) {
                imageURL = imageURL.replace("<SIZE>", "300");
            }
            let price = data[0].price.toString();
            let priceWithDecimal = price.split('.');
    
    
            let html_data = ` <div data-automation-id="TodaysRecommendationsForYou" id="TodaysRecommendationsForYou" testid="TodaysRecommendationsForYou" class="desktop-items content-card home-page-card todays-recs content-card--responsive" data-type="container">
          <meta data-prop="name" content="pers_todaysRecsForYou">
          <div role="presentation" class="content-card__body">
             <div class="col__12-12 content-card__header">
                <div class="row-header row-header--nomargin">
                   <div class="row-header__title">
                      <h2 class="row-header__text row-header__text--plain">It's Back In stock</h2>
                   </div>
                </div>
             </div>
             <div class="content-card__summary" style="max-height: none;">
                <div class="carousel" style="margin-right: -15px; width: calc(100% + 15px);">
                
                   <div class="axis-horizontal slider-wrapper">
                      <div class="slider animated" style="transform: translate3d(0px, 0px, 0px); transition-duration: 350ms;">
                      
                            <article class="product__container " data-type="product">
                               <meta data-prop="productID" content="`+ data[0].productId + `">
                               <meta data-prop="name" content="`+ data[0].productName + `">
                               <meta data-prop="brand" content="DUST OFF">
                               <div class="product__img_link_container">
                                  <a href="`+ data[0].canonicalURL + `">
                                     <div class="product__image-container" style="width: 130px;"><img src="`+ imageURL + `" alt="Image not found" class="product__image"></div>
                                  </a>
                               </div>
                            </article>
                      
                         <div style="padding-top: 10%;">
                               <a href="`+ data[0].canonicalURL + `">
                                    <div class="product__description" style=" padding-bottom: 4%; display:table" >
                                     
                                        <span>
                                        <span class="product__brand">`+ data[0].brand + ` </span>` + data[0].productName + `</span>
                                       
                                    </div>
                              </a>
                            <div class="rating-and-reviews"><a href="`+ data[0].canonicalURL + `" class="reviews"><span class="stars" rel="` + data[0].rating + `" style="width: 92.72%;"></span></a><a class="number-rating" href="/p/Sterilite-70-Qt-Ultra-Storage-Box-19888604/204606576">(` + data[0].reviews + `)</a></div>
                            <span class="product-price"><b class="product-price__container"><span class="product-price__dollarSign"><sup class="product-price__dollarSign_sup">$</sup></span><span>`+ priceWithDecimal[0] + `</span><span class="product-price__cents"><sup class="product-price__cents_sup">` + priceWithDecimal[1] + `</sup></span></b></span>
                         </div>
                      </div>
                   </div>
                  
                <span >
                    <button id="tht_add_to_cart"class="u--marginNormal-top bttn-outline bttn-outline--primary" style="width: 95%;">
                        <span class="bttn__content">Add to Cart</span>
                    </button>
                </span>
             </div>
          </div>
       </div>`
    
            // insertAfter(new_element, old_node);
              if(document.querySelector("#personalized-homepage > div.grid.isBound > div:nth-child(3)"))
              {

                document.querySelector("#personalized-homepage > div.grid.isBound > div:nth-child(3)").innerHTML= html_data
              }
    
              if(document.getElementById("tht_add_to_cart"))
              {
                        let addToCartBtn = document.getElementById("tht_add_to_cart")
                        addToCartBtn.addEventListener("click", function () {
                            const storeID = getStoreID();
                            window.tntExposedObjects['thd-cart-bindings'].addToCart({
                                "itemId": data[0].productId,
                                "quantity": 1,
                                "fulfillmentMethod": "ShipToStore",
                                "fulfillmentLocation": storeID
                            }, {
                                host: '//' + window.location.host,
                                channel: 'desktop',
                            })
                                .on('success', function (resp) {
                                    //console.log(resp);
                                })
                                .on('error', function (resp) {
                                    //console.log(resp);
                                })
                        });
           }
    
        }
      
        function productClickHandler(e) {
        console.log(e.currentTarget.classList)
        if (e.currentTarget.classList.contains('certona__productbttnwrapper')) {
          let id = parseInt(e.currentTarget.firstElementChild.attributes['data-item-id'].value )
          console.log(id)
          let channel
          let x = window.matchMedia('(max-width: 800px)')
          if (x.matches) {
            channel = 'mobile'
          } else {
            channel = 'desktop'
          }
          e.preventDefault()
          if (id) {
          //   window.LIFE_CYCLE_EVENT_BUS.trigger('cart.add-to-cart', {
          //     cartReqParams: {
          //       itemId: id,
          //       quantity: 1,
          //       fulfillmentMethod: 'ShipToHome',
          //       fulfillmentLocation:
          //         readCookie('DETA_ZIP') || readCookie('DELIVERY_ZIP'),
          //     },
          //     cartOptions: {
          //       host: '//' + window.location.host,
          //       channel: channel,
          //     },
          //     onSuccess: () => console.log('SUCCESS!'),
          //   })
          // }const storeID = getStoreID();
         
                const storeID = getStoreID();
                window.tntExposedObjects['thd-cart-bindings'].addToCart({
                    "itemId":id,
                    "quantity": 1,
                    "fulfillmentMethod": "ShipToStore",
                    "fulfillmentLocation": storeID
                }, {
                    host: '//' + window.location.host,
                    channel: 'desktop',
                })
                    .on('success', function (resp) {
                        //console.log(resp);
                    })
                    .on('error', function (resp) {
                        //console.log(resp);
                    })
            };
    
        
    
                    
        } else {
        }
      }
      
      const anchorPattern = /\/\d+$/g,
        negativeIntegerPattern = /-\d+/g,
        translate3dPattern = /translate3d\(-?\d+px, -?\d+px, -?\d+px\)/g

      const initializeCarosuel = function (html, options = {}) {
        let carousel = this
        carousel = $(carousel).find('.carousel__wrapper')
        options = Object.assign(
          {
            autoWidth: true,
            dots: false,
            items: 4,
            margin: 0,
            nav: true,
            navClass: [
              'carousel__prev carousel__height',
              'carousel__next carousel__height',
            ],
            navText: [
              '<svg class="carousel__prev-button" viewBox="0 0 12 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><path d="M3.35738643,4.0642103 L3.35738643,3.09586423 L17.8582152,3.09586423 L17.8582152,5.03255637 L5.28304981,5.03255637 L5.28304981,17.6355953 L3.35738643,17.6355953 L3.35738643,4.0642103 Z" id="back-arrow" fill="#F96302" sketch:type="MSShapeGroup" transform="translate(10.607801, 10.365730) rotate(-45.000000) translate(-10.607801, -10.365730) "></path></g></svg>',
              '<svg class="carousel__next-button" viewBox="0 0 12 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><path d="M-5.88468462,4.30628135 L-5.88468462,3.33793528 L8.61614419,3.33793528 L8.61614419,5.27462742 L-3.95902124,5.27462742 L-3.95902124,17.8776664 L-5.88468462,17.8776664 L-5.88468462,4.30628135 Z" id="next-arrow" fill="#F96302" sketch:type="MSShapeGroup" transform="translate(1.365730, 10.607801) rotate(-225.000000) translate(-1.365730, -10.607801) "></path></g></svg>',
            ],
            slideBy: 1,
            onInitialized: () => {
              setTimeout(() => {
                carousel
                  .trigger('replace.owl.carousel', html)
                  .trigger('refresh.owl.carousel')
              }, 1000)
            },
            onTranslated: () => {
              if (carousel.find('.owl-nav .carousel__next.disabled').length) {
                if (negativeIntegerPattern.test(this.$stage.css('transform'))) {
                  const currentX = parseFloat(
                    this.$stage
                      .css('transform')
                      .match(negativeIntegerPattern)[0]
                  )
                  if (translate3dPattern.test(this.$stage.attr('style'))) {
                    let adjustedTransform =
                      $(this.$stage).parent().get(0).getClientRects()[0].right -
                      $(this.$stage).get(0).getClientRects()[0].right
                    adjustedTransform = currentX + adjustedTransform
                    $(this.$stage).attr(
                      'style',
                      'transform: ' +
                      $(this.$stage)
                        .attr('style')
                        .match(translate3dPattern)[0]
                        .replace(negativeIntegerPattern, adjustedTransform)
                        .concat(
                          ';transition: all 0.35s ease 0s;width: max-content;'
                        )
                    )
                  }
                }
              }
            },
          },
          options
        )
        carousel.owlCarousel(options)
      }  
      const updateWidget = ({ metadata, data, products }) => {
        if (data) {
          let messaging
          let difficultyLevelImageURL
          let difficulty
          let prjDurationImageURL
          let duration
          let pgImageURL
          let pgurl
          data.forEach((el) => {
            if (el.type == 'messaging') {
              messaging = el.id
            }
            if (el.type == 'difficultyLevelImageURL') {
              difficultyLevelImageURL = el.id
            }
            if (el.type == 'difficulty') {
              difficulty = el.id
            }
            if (el.type == 'prjDurationImageURL') {
              prjDurationImageURL = el.id
            }
            if (el.type == 'duration') {
              duration = el.id
            }
            if (el.type == 'pgImageURL') {
              pgImageURL = el.id
            }
            if (el.type == 'pgurl') {
              pgurl = el.id
            }
          })
          if (
            document.querySelector('.meta-container') &&
            document.querySelectorAll('.meta-container').length > 0
          ) {
            document
              .getElementById('required_items')
              .querySelector('h2.row-header__text').innerText = messaging
            document
              .querySelector('.meta-container')
              .children[0].querySelector('img').src = difficultyLevelImageURL
            document
              .querySelector('.meta-container')
              .children[0].querySelectorAll('span')[1].innerText = difficulty
            document
              .querySelector('.meta-container')
              .children[1].querySelector('img').src = prjDurationImageURL
            document
              .querySelector('.meta-container')
              .children[1].querySelectorAll('span')[1].innerText = duration
            document
              .querySelector('.meta-container')
              .children[2].querySelector('img').src = pgImageURL
            document
              .querySelector('.meta-container')
              .children[2].querySelector('a.learn-how').href = pgurl
          } else {
            const widget =
              ` <div class="item"> <img src="` +
              difficultyLevelImageURL`+" alt=""> <div> <span class="bold">Difficulty</span> <br><span>` +
              difficulty +
              `</span> </div></div><div class="item"> <img src="` +
              prjDurationImageURL +
              `" alt=""> <div> <span class="bold">Time</span> <br><span>` +
              duration +
              `</span> </div></div><div class="item"> <img src="` +
              pgImageURL +
              `" alt=""> <div> <span><a href="` +
              pgurl +
              `" class="learn-how" target="_blank">Learn&nbsp;How</a></span> </div></div>`
            if (
              document.querySelector('.meta-container') &&
              document.querySelectorAll('.meta-container').length <= 0
            ) {
              document
                .querySelector('.meta-container')
                .insertAdjacentHTML('afterbegin', widget)
            }
            if (document.querySelector('.meta-container') == null) {
              let el = document.createElement('div')
              el.classList.add('tnt_meta-container', 'meta-container')
              document
                .getElementById('required_items')
                .querySelector('.certona__wrapper')
                .insertAdjacentHTML('afterbegin', el)
              document
                .querySelector('.tnt_meta-container.meta-container')
                .insertAdjacentHTML('afterbegin', widget)
            }
          }
        }
      }
      const buildProducts = ({ metadata, data, products }) => {
        let proHtml = ''
        products.forEach((value, index) => {
          if (value) {
            let productName = value.productName
            let notRated = ''
            let brand = value.brand ? value.brand + ' ' : ''
            let canonicalURL = value.canonicalURL
            let imagePath =
              (value.imageURL && value.imageURL.replace('<SIZE>', '300')) ||
              value.imageURL
            let rating =
              (value.rating && (100 * parseFloat(value.rating)) / 5) || 0
            let reviews = value.reviews ? '(' + value.reviews + ')' : ''
            let productId = value.id
            let pricingWrapper = ''
            let uom = value.uom ? value.uom : ''
            let originalPrice = value.originalPrice ? value.originalPrice : ''
            let price = value.price ? getPriceBreakdown(value.price) : 0
            let { currency, dollar, cent } = price
            let atcClass = 'js-certona-atc'
            let isActiveItem = ''
            let priceHTML = dollar
              ? '<span class="price__format">' +
              currency +
              '</span>' +
              dollar +
              '<span class="price__format">' +
              cent +
              '</span>'
              : cent + '<span class="price__format">' + currency + '</span>'
            //let uomHTML = uom ? '<span class="price__unit">/' + uom + "</span>" : "";
            //priceHTML = priceHTML.concat(uomHTML);
            let wasPriceHTML = originalPrice
              ? '<div class="price__special">Was&nbsp;<span class="u__strike">' +
              originalPrice +
              '</span></div>'
              : ''
            if (value.itemType === 'MAJOR_APPLIANCE') {
              let channel = THD_GLOBAL.channel || 'web'
              atcClass = 'js-certona-atc-appliance'
            }
            proHtml +=
              `<div class="tnt_owl-item owl-item` +
              isActiveItem +
              `" style="width: auto"> <div class="certona__productpod" data-type="product"> <meta data-prop="productId" content="` +
              productId +
              `"/> <meta data-prop="name" content="` +
              productName +
              `"/> <meta data-prop="brand" content="` +
              brand +
              `"/> <div class="certona__productimagewrapper"> <a href="//www.homedepot.com` +
              canonicalURL +
              `" data-product-id="` +
              productId +
              `" data-schema="required_items" data-strategy="project-based" data-version="v1" > <img class="certona__productimg" src="` +
              imagePath +
              `" alt="` +
              productName +
              `" s="" loading="lazy" width="170" height="170"/> </a> </div><div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com` +
              canonicalURL +
              `" data-product-id="202312407" data-schema="required_items" data-strategy="project-based" data-version="v1" data-pos="` +
              (index + 1) +
              `" > <span class="certona__brand">` +
              brand +
              `</span> <span>` +
              productName +
              `</span> </a> </div><div class="certona__productratingwrapper"> <a class="reviews" href="//www.homedepot.com` +
              canonicalURL +
              `" data-product-id="` +
              productId +
              `" data-schema="required_items" data-strategy="project-based" data-version="v1" data-pos="` +
              (index + 1) +
              `" > <span class="stars" style="width:` +
              rating +
              `%" ></span> </a> <a href="//www.homedepot.com` +
              canonicalURL +
              `" data-schema="required_items" data-strategy="project-based" data-version="v1" data-pos="` +
              (index + 1) +
              `" >(226)</a > </div><div class="certona__productpricingwrapper"> <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> <div class="price"> ` +
              priceHTML +
              ` </div>` +
              wasPriceHTML +
              ` </div><div class="certona__productbttnwrapper"> <a class="` +
              atcClass +
              ` bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="` +
              productId +
              `" data-schema="required_items" data-strategy="project-based" data-version="v1" data-pos="` +
              (index + 1) +
              `"> <span class="tnt__bttn__content">Add To Cart</span> </a> </div></div></div>`
          }
        })
        return proHtml
      }
      async function getProducts() {
        const userStatus = getUserStatus()
        const apiLink =
          'https://datascience-testservice-api.hd-datascience-prod.gcp.homedepot.com/dts/v1/product?anchor=051CC9D043AB935D0S&model=back_in_stock_alert&appid=desktop&key=AnPrMR0LKfdglJQfoHqsT4sAhDLHNaGw'

        if (userStatus == 'b2cAuth') {
          const recosResponse = await fetch(apiLink)
          if (recosResponse.status !== 200) {
            return null
          }
          const data = await recosResponse.json()
          return data
        }
        return null
      }
      async function buildCarousel(products) {
       //6 const products = await getProducts()
        const productsHTML = buildProducts(products)
        let container
        let carousel
        if (products) {
          let element = ` <div id="required_items" style="padding: 0px;background-color: #fff;margin: 15px 0;height: 100%;" data-type="container">
        <meta data-prop="name" content="required_items">
        <div class="grid isBound certona__wrapper certona__wrapper--nofill ">
           <div class="col__12-12">
              <div role="presentation" class="content-card__body">
               <div class="col__12-12 content-card__header">
                  <div class="row-header--nomargin">
                     <div class="row-header__title">
                        <h2 class="row-header__text row-header__text--plain"
                         style="font-family:helvetica-neue-heavy-condensed,Helvetica Neue,Helvetica,Arial,sans-serif!important; font-size: 24px!important;">It's Back In stock</h2>
                     </div>
                  </div>
               </div>
           </div>
           <div class="col__12-12">
              <div class="carousel__wrapper owl-loaded owl-drag">
                 <div class="owl-stage-outer">
                    <div class="carousel__right-gradient carousel__show">&nbsp;</div>
                    <div class="carousel__left-gradient carousel__hide">&nbsp;</div>
                    <div class="owl-stage" style="transform: translate3d(0px, 0px, 0px); transition: all 0s ease 0s; width: 1380px;">
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="202312407">
                             <meta data-prop="name" content="14 oz. Plumber's Putty">
                             <meta data-prop="brand" content="Oatey">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/Oatey-14-oz-Plumber-s-Putty-311662/202312407?MERCH=REC-_-required_items-_-206577641-_-202312407-_-N" data-product-id="202312407" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/5042563a-0971-4c7f-958a-573a444eb6d1/svn/oatey-pipe-putty-311662-64_300.jpg" alt="14 oz. Plumber" s="" putty'="" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/Oatey-14-oz-Plumber-s-Putty-311662/202312407?MERCH=REC-_-required_items-_-206577641-_-202312407-_-N&amp;" data-product-id="202312407" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">Oatey</span> <span>14 oz. Plumber's Putty</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/Oatey-14-oz-Plumber-s-Putty-311662/202312407?MERCH=REC-_-required_items-_-206577641-_-202312407-_-N" data-product-id="202312407" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.8" title="Rating 4.8 out of 5" style="width:96%" "=""></span> </a> <a href="//www.homedepot.com/p/Oatey-14-oz-Plumber-s-Putty-311662/202312407?MERCH=REC-_-required_items-_-206577641-_-{{productId}}-_-N#product-reviews" data-schema="required_items" data-strategy="project-based" data-version="v1">(226)</a> </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>1<span class="price__format">74</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="202312407" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="100663319">
                             <meta data-prop="name" content="Advanced Silicone 2 10.1 oz. Clear Kitchen and Bath Caulk">
                             <meta data-prop="brand" content="GE">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/GE-Advanced-Silicone-2-10-1-oz-Clear-Kitchen-and-Bath-Caulk-2708923/100663319?MERCH=REC-_-required_items-_-206577641-_-100663319-_-N" data-product-id="100663319" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/ec3afb5f-8f61-4bc4-b43e-cb0892914b01/svn/clear-ge-caulk-2708923-64_300.jpg" alt="Advanced Silicone 2 10.1 oz. Clear Kitchen and Bath Caulk" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/GE-Advanced-Silicone-2-10-1-oz-Clear-Kitchen-and-Bath-Caulk-2708923/100663319?MERCH=REC-_-required_items-_-206577641-_-100663319-_-N&amp;" data-product-id="100663319" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">GE</span> <span>Advanced Silicone 2 10.1 oz. Clear Kitchen and Bath Caulk</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/GE-Advanced-Silicone-2-10-1-oz-Clear-Kitchen-and-Bath-Caulk-2708923/100663319?MERCH=REC-_-required_items-_-206577641-_-100663319-_-N" data-product-id="100663319" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.5" title="Rating 4.5 out of 5" style="width:90%" "=""></span> </a> <a href="//www.homedepot.com/p/GE-Advanced-Silicone-2-10-1-oz-Clear-Kitchen-and-Bath-Caulk-2708923/100663319?MERCH=REC-_-required_items-_-206577641-_-{{productId}}-_-N#product-reviews" data-schema="required_items" data-strategy="project-based" data-version="v1">(1951)</a> </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>7<span class="price__format">58</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="100663319" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="100341454">
                             <meta data-prop="name" content="8 in. Journeyman High Leverage Diagonal Cutting Pliers with Angled Head">
                             <meta data-prop="brand" content="Klein Tools">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/Klein-Tools-8-in-Journeyman-High-Leverage-Diagonal-Cutting-Pliers-with-Angled-Head-J248-8SEN/100341454?MERCH=REC-_-required_items-_-206577641-_-100341454-_-N" data-product-id="100341454" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/e1e43360-0090-4b4e-81b1-474fb0423077/svn/klein-tools-cutting-j248-8sen-64_300.jpg" alt="8 in. Journeyman High Leverage Diagonal Cutting Pliers with Angled Head" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/Klein-Tools-8-in-Journeyman-High-Leverage-Diagonal-Cutting-Pliers-with-Angled-Head-J248-8SEN/100341454?MERCH=REC-_-required_items-_-206577641-_-100341454-_-N&amp;" data-product-id="100341454" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">Klein Tools</span> <span>8 in. Journeyman High Leverage Diagonal Cutting Pliers with Angled Head</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/Klein-Tools-8-in-Journeyman-High-Leverage-Diagonal-Cutting-Pliers-with-Angled-Head-J248-8SEN/100341454?MERCH=REC-_-required_items-_-206577641-_-100341454-_-N" data-product-id="100341454" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.6" title="Rating 4.6 out of 5" style="width:92%" "=""></span> </a> <a href="//www.homedepot.com/p/Klein-Tools-8-in-Journeyman-High-Leverage-Diagonal-Cutting-Pliers-with-Angled-Head-J248-8SEN/100341454?MERCH=REC-_-required_items-_-206577641-_-{{productId}}-_-N#product-reviews" data-schema="required_items" data-strategy="project-based" data-version="v1">(105)</a> </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>39<span class="price__format">97</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="100341454" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="tnt__bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="203013821">
                             <meta data-prop="name" content="9 oz. Stain-Free Plumber's Putty">
                             <meta data-prop="brand" content="Oatey">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/Oatey-9-oz-Stain-Free-Plumber-s-Putty-31177/203013821?MERCH=REC-_-required_items-_-206577641-_-203013821-_-N" data-product-id="203013821" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/d9a8e88f-6d14-4082-8822-e64d68a24792/svn/oatey-pipe-putty-31177-64_300.jpg" alt="9 oz. Stain-Free Plumber" s="" putty'="" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/Oatey-9-oz-Stain-Free-Plumber-s-Putty-31177/203013821?MERCH=REC-_-required_items-_-206577641-_-203013821-_-N&amp;" data-product-id="203013821" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">Oatey</span> <span>9 oz. Stain-Free Plumber's Putty</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/Oatey-9-oz-Stain-Free-Plumber-s-Putty-31177/203013821?MERCH=REC-_-required_items-_-206577641-_-203013821-_-N" data-product-id="203013821" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.6" title="Rating 4.6 out of 5" style="width:92%" "=""></span> </a> <a href="//www.homedepot.com/p/Oatey-9-oz-Stain-Free-Plumber-s-Putty-31177/203013821?MERCH=REC-_-required_items-_-206577641-_-{{productId}}-_-N#product-reviews" data-schema="required_items" data-strategy="project-based" data-version="v1">(109)</a> </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>3<span class="price__format">47</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="203013821" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="100097524">
                             <meta data-prop="name" content="Alex Plus 10.1 oz. White Acrylic Latex Caulk Plus Silicone">
                             <meta data-prop="brand" content="DAP">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/DAP-Alex-Plus-10-1-oz-White-Acrylic-Latex-Caulk-Plus-Silicone-18103/100097524?MERCH=REC-_-required_items-_-206577641-_-100097524-_-N" data-product-id="100097524" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/66016895-a1aa-445a-954f-8f75a0f7a6ed/svn/white-dap-caulk-18103-64_300.jpg" alt="Alex Plus 10.1 oz. White Acrylic Latex Caulk Plus Silicone" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/DAP-Alex-Plus-10-1-oz-White-Acrylic-Latex-Caulk-Plus-Silicone-18103/100097524?MERCH=REC-_-required_items-_-206577641-_-100097524-_-N&amp;" data-product-id="100097524" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">DAP</span> <span>Alex Plus 10.1 oz. White Acrylic Latex Caulk Plus Silicone</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/DAP-Alex-Plus-10-1-oz-White-Acrylic-Latex-Caulk-Plus-Silicone-18103/100097524?MERCH=REC-_-required_items-_-206577641-_-100097524-_-N" data-product-id="100097524" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.3" title="Rating 4.3 out of 5" style="width:86%" "=""></span> </a> <a href="" </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>2<span class="price__format">82</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="100097524" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                       <div class="owl-item active" style="width: auto;">
                          <div class="certona__productpod " data-type="product">
                             <meta data-prop="productID" content="100496136">
                             <meta data-prop="name" content="12 in. High-Tension Hack Saw with 10 in. Mini Hack Saw">
                             <meta data-prop="brand" content="Stanley">
                             <div class="certona__productimagewrapper"> <a href="//www.homedepot.com/p/Stanley-12-in-High-Tension-Hack-Saw-with-10-in-Mini-Hack-Saw-20-036M/100496136?MERCH=REC-_-required_items-_-206577641-_-100496136-_-N" data-product-id="100496136" data-schema="required_items" data-strategy="project-based" data-version="v1"> <img class="certona__productimg" src="https://images.thdstatic.com/productImages/d2990c46-0940-4087-bc30-b763b7a57d83/svn/stanley-hand-saws-20-036m-64_300.jpg" alt="12 in. High-Tension Hack Saw with 10 in. Mini Hack Saw" loading="lazy" width="170" height="170"> </a> </div>
                             <div class="certona__productdescriptionwrapper"> <a class="" href="//www.homedepot.com/p/Stanley-12-in-High-Tension-Hack-Saw-with-10-in-Mini-Hack-Saw-20-036M/100496136?MERCH=REC-_-required_items-_-206577641-_-100496136-_-N&amp;" data-product-id="100496136" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="certona__brand">Stanley</span> <span>12 in. High-Tension Hack Saw with 10 in. Mini Hack Saw</span> </a> </div>
                             <div class="certona__productratingwrapper"> <a class="reviews " href="//www.homedepot.com/p/Stanley-12-in-High-Tension-Hack-Saw-with-10-in-Mini-Hack-Saw-20-036M/100496136?MERCH=REC-_-required_items-_-206577641-_-100496136-_-N" data-product-id="100496136" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="stars" rel="4.5" title="Rating 4.5 out of 5" style="width:90%" "=""></span> </a> <a href="//www.homedepot.com/p/Stanley-12-in-High-Tension-Hack-Saw-with-10-in-Mini-Hack-Saw-20-036M/100496136?MERCH=REC-_-required_items-_-206577641-_-{{productId}}-_-N#product-reviews" data-schema="required_items" data-strategy="project-based" data-version="v1">(484)</a> </div>
                             <div class="certona__productpricingwrapper">
                                <span class="u__normal u__text--alternate u--hide"> See Lower Price in Cart </span> 
                                <div class="price "> <span class="price__format">$</span>15<span class="price__format">97</span> </div>
                             </div>
                             <div class="certona__productbttnwrapper"> <a class="js-certona-atc bttn-outline bttn-outline--primary" data-onclickbeacon="" data-quantity="1" data-item-id="100496136" data-schema="required_items" data-strategy="project-based" data-version="v1"> <span class="tnt__bttn__content">Add To Cart</span> </a> </div>
                          </div>
                       </div>
                    </div>
                 </div>
                 <div class="carousel__nav">
                    <button type="button" role="presentation" class="carousel__prev disabled">
                       <svg class="carousel__prev-button" viewBox="0 0 12 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                          <defs></defs>
                          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                             <path d="M3.35738643,4.0642103 L3.35738643,3.09586423 L17.8582152,3.09586423 L17.8582152,5.03255637 L5.28304981,5.03255637 L5.28304981,17.6355953 L3.35738643,17.6355953 L3.35738643,4.0642103 Z" id="back-arrow" fill="#F96302" sketch:type="MSShapeGroup" transform="translate(10.607801, 10.365730) rotate(-45.000000) translate(-10.607801, -10.365730) "></path>
                          </g>
                       </svg>
                    </button>
                    <button type="button" role="presentation" class="carousel__next">
                       <svg class="carousel__next-button" viewBox="0 0 12 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                          <defs></defs>
                          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                             <path d="M-5.88468462,4.30628135 L-5.88468462,3.33793528 L8.61614419,3.33793528 L8.61614419,5.27462742 L-3.95902124,5.27462742 L-3.95902124,17.8776664 L-5.88468462,17.8776664 L-5.88468462,4.30628135 Z" id="next-arrow" fill="#F96302" sketch:type="MSShapeGroup" transform="translate(1.365730, 10.607801) rotate(-225.000000) translate(-1.365730, -10.607801) "></path>
                          </g>
                       </svg>
                    </button>
                 </div>
                 <div class="owl-dots disabled"></div>
              </div>
              <div class="certona-atc__error certona-atc__hide"></div>
           </div>
        </div>
     </div>`
          if (  document.querySelector('#personalized-homepage > div.grid.isBound> div:nth-child(3)')) 
          {
            // let component = document.createElement('div')
            // component.className = 'col__12-12 col__6-12--xs col__6-12--sm col__4-12--md col__4-12--lg'
            // component.setAttribute('data-lg-name', 'required-items')
            // component.setAttribute('name', 'required-items')
            // if (document.querySelector('#personalized-homepage > div.grid.isBound > div:nth-child(2)')) 
            // {
            //   //document.querySelector('#personalized-homepage > div.grid.isBound > div:nth-child(2)').insertAdjacentElement('afterend', component)
            // } 
            // else
            // {
            //   //  document.querySelector('[data-lg-name="augmented-reality"]').insertAdjacentElement("afterend", component);
            // }
           // document.querySelector('[data-lg-name="required-items"]').insertAdjacentHTML('afterbegin', element)
            document.querySelector("#personalized-homepage > div.grid.isBound > div:nth-child(3)").innerHTML=element
            container = document.getElementById('required_items')
            carousel = container.querySelector('.carousel__wrapper')
            carousel.innerHTML = ''
            initializeCarosuel.call(container, productsHTML)
            setTimeout(function () {
              if (
                document.querySelector(
                  '.tnt_owl-item .certona__productbttnwrapper'
                )
              ) {
                let podButton = document.querySelectorAll(
                  '.tnt_owl-item .certona__productbttnwrapper'
                )
                podButton.forEach((e) => {
                  e.onclick = productClickHandler.bind(podButton)
                })
              }
            }, 1000)
          } else {
            if (
              document.getElementById('required_items') &&
              document
                .getElementById('required_items')
                .querySelector('.carousel__wrapper')
            ) {
              update()
            }
            if (              document.getElementById('required_items').childNodes.length == 0 )
             {
              document
                .getElementById('required_items')
                .insertAdjacentHTML('afterbegin', element)
              container = document.getElementById('required_items')
              carousel = container.querySelector('.carousel__wrapper')
              carousel.innerHTML = ''
              initializeCarosuel.call(container, productsHTML)
            }
          }
          updateWidget(products)
        }
      }
      const updateStage = async function (html) {
        const stage = this
        const carousel = stage.closest('.carousel__wrapper')
        const owlStage = stage.querySelector('.owl-stage')
        stage.style.width = 'max-content'
        stage.innerHTML = html
        jQuery(document).ready(function ($) {
          $(carousel).owlCarousel()
          const owlCarousel = $(carousel).data('owl.carousel')
          if (owlCarousel) {
            owlCarousel._items = []
            $(stage)
              .children()
              .each((i, el) => {
                owlCarousel._items.push($(el))
              })
            $(carousel).trigger('refresh.owl.carousel')
            $(carousel).on('translated.owl.carousel', function (_event) {
              if (
                $(stage).closest('.owl-stage-outer')[0].getClientRects()[0]
                  .right > $(stage)[0].getClientRects()[0].right
              ) {
                const overflow =
                  $(stage).closest('.owl-stage-outer')[0].getClientRects()[0]
                    .right - $(stage)[0].getClientRects()[0].right
                let carouselX = parseFloat(
                  $(stage)
                    .attr('style')
                    .split(';')[0]
                    .trim()
                    .match(transformPattern)[0]
                    .replace('px', '')
                )
                carouselX = carouselX + overflow
                carouselX = carouselX + 'px'
                setTimeout(() => {
                  $(stage)
                    .attr('style')
                    .split(';')[0]
                    .trim()
                    .replace(transformPattern, carouselX)
                }, 250)
              }
            })
          }
        })
      }
      async function update() {
        getProducts()
          .then((products) => {
            if (products) {
              const productsHTML = buildProducts(products)
              updateWidget(products)
              let stage = document
                .getElementById('required_items')
                .querySelector('.owl-stage')
              updateStage.call(stage, productsHTML)
            }
          })
          .catch((e) => { })
      }
   
    
      const cookieStorage = {
    get: function(cname) {
        let name = cname + "=";
        let ca = document.cookie.split(";");
        for (var i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == " ") {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    },
    set: function(cname, cvalue, days = 1) {
        let d = new Date();
        d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
        let expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }
};
    if (!cookieStorage.get("php_test_card")) {
        cookieStorage.set("php_test_card", "true");
    }
  
    const waitForPHPCards=()=> {
        let timerCount = 1;
        let timer = setInterval(function() {
            timerCount = timerCount + 1;
            if (document.querySelector('[data-automation-id="testAndTargetBlankCard"]>div')) {
                clearInterval(timer);
                loadPHPCard();
            }
        }, 1000);
        if (timerCount > 2000) 
        {
            clearInterval(timer);
        }
   }
    const loadPHPCard=()=> {
            document.querySelector('[data-automation-id="testAndTargetBlankCard"]').innerHTML = "";
            document.querySelector('[data-automation-id="testAndTargetBlankCard"]').setAttribute("id", "tnt_backInStock");
            let backInStockContent = ``; /*test specific content*/
            document.querySelector('[data-automation-id="testAndTargetBlankCard"]').innerHTML = backInStockContent;
            backInStock();
      }
    waitForPHPCards();
    const backInStock=()=> {
            console.log("inside backInStock function")
            const userStatus = getUserStatus();
            const svoc= getSVOC_ID();
            console.log(svoc);
               //  const apiLink = 'https://datascience-testservice-api.hd-datascience-prod.gcp.homedepot.com/dts/v1/product?anchor=051CC9D043AB935D0S&model=back_in_stock_alert&appid=desktop&key=AnPrMR0LKfdglJQfoHqsT4sAhDLHNaGw'
            const apiLink = `https://datascience-testservice-api.hd-datascience-prod.gcp.homedepot.com/dts/v1/product?anchor=`+svoc+`&model=back_in_stock_alert&appid=desktop&key=AnPrMR0LKfdglJQfoHqsT4sAhDLHNaGw`
  
            if (userStatus == "b2cAuth") {
                fetch(apiLink)
                    .then(resp => resp.json())
                    .then(resp => {
                        if (resp['products']) {
                            setTimeout(function () {

                                if(resp['products'].length==1)
                                {
                                createSingleCard(resp['products']);
                                }
                                else if(resp['products'].length>1)
                                {
                                    buildCarousel(resp)
                                
                                }
                            }, 2000);
                        }
                    });
            }
     }
    
    
    
    } catch (error) {
      
}
</script>
